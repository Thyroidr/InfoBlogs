<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/InfoBlogs/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/InfoBlogs/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/InfoBlogs/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/InfoBlogs/images/logo.svg" color="#222">

<link rel="stylesheet" href="/InfoBlogs/css/main.css">


<link rel="stylesheet" href="/InfoBlogs/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"thyroidr.github.io","root":"/InfoBlogs/","scheme":"Mist","version":"7.8.0","exturl":false,"sidebar":{"position":"left","Muse | Mist":280,"display":"always","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Q1 &amp; CodeForces 147B: Smile HouseProblem Link SolutionWe can rephrase the problem to:  for a given graph of $n$ vertices, find a cycle with the minimum of vertices such that the sum of all edge we">
<meta property="og:type" content="article">
<meta property="og:title" content="Virtual Contest 2018&#x2F;10&#x2F;19">
<meta property="og:url" content="https://thyroidr.github.io/InfoBlogs/DTOJ/DTOJ/virtual-contest-2018-10-19/">
<meta property="og:site_name" content="InfoBlogs">
<meta property="og:description" content="Q1 &amp; CodeForces 147B: Smile HouseProblem Link SolutionWe can rephrase the problem to:  for a given graph of $n$ vertices, find a cycle with the minimum of vertices such that the sum of all edge we">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2018-10-25T11:55:25.000Z">
<meta property="article:modified_time" content="2019-04-17T01:38:56.000Z">
<meta property="article:author" content="Ryan Wang">
<meta property="article:tag" content="c++">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://thyroidr.github.io/InfoBlogs/DTOJ/DTOJ/virtual-contest-2018-10-19/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>Virtual Contest 2018/10/19 | InfoBlogs</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/InfoBlogs/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">InfoBlogs</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">by Ryan Wang</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/InfoBlogs/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/InfoBlogs/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/InfoBlogs/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/InfoBlogs/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/thyroidr" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://thyroidr.github.io/InfoBlogs/DTOJ/DTOJ/virtual-contest-2018-10-19/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/InfoBlogs/images/avatar.png">
      <meta itemprop="name" content="Ryan Wang">
      <meta itemprop="description" content="Museum of my involvement in Informatics Olympiads & competitive programming">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="InfoBlogs">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Virtual Contest 2018/10/19
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-10-25 22:55:25" itemprop="dateCreated datePublished" datetime="2018-10-25T22:55:25+11:00">2018-10-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-04-17 11:38:56" itemprop="dateModified" datetime="2019-04-17T11:38:56+10:00">2019-04-17</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/InfoBlogs/categories/DTOJ/" itemprop="url" rel="index"><span itemprop="name">DTOJ</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="Q1-amp-CodeForces-147B-Smile-House"><a href="#Q1-amp-CodeForces-147B-Smile-House" class="headerlink" title="Q1 &amp; CodeForces 147B: Smile House"></a>Q1 &amp; CodeForces 147B: Smile House</h2><p><a target="_blank" rel="noopener" href="https://codeforces.com/problemset/problem/147/B">Problem Link</a></p>
<h3 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h3><p>We can rephrase the problem to:</p>
<blockquote>
<p>for a given graph of $n$ vertices, find a cycle with the minimum of vertices such that the sum of all edge weights on the cycle is positive.</p>
</blockquote>
<p>Let $f_{i, j, k}$ be the maximum distance from $j$ to $k$, passing $i$ vertices. then clearly $f_{i, j, k} = \min{f_{i-1, j, l} + g_{l, k}}$ (memories from Floyd-Warshall). Preprocessing this would have a time complexity of $O(n^4)$, we can hence consider changing $f$ to a sparse table. Let $f_{i, j, k}$ represent the maximum distance from $j$ to $k$, passing $2^i$ vertices, then $f_{i, j, k} = \min {f_{i-1, j, l} + f_{i-1, l, k}}$. This would have a time complexity of $O(n^3 \log n)$.</p>
<a id="more"></a>
<p>We can see that the answer is monotone and can hence be binary-searched. We can hence use a similar method as when find the LCA (lowest common ancestor) to find the maximum number of vertices that cannot form a positive cycle. As the answer is smaller than $2^{10}$, we can iterate through the powers to high to low. If the current answer plus the iterated value results in a positive cycle, then we cannot add the iterated value (remember, we are trying to find the maximum number that cannot form a positive cycle), otherwise do so. Remember to add $1$ to the final answer.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fo(a, b, c) for (int a = b; a &lt;= c; a++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rfo(a, b, c) for (int a = b; a &gt;= c; a--)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">3e2</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> f[<span class="number">10</span>][N][N], c[<span class="number">2</span>][N][N];</span><br><span class="line"><span class="keyword">int</span> n, m, Ans = <span class="number">1</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ios_base::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">if</span>(n == <span class="number">300</span> &amp;&amp; m == <span class="number">44849</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">puts</span>(<span class="string">&quot;300&quot;</span>), <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// I would be thankful if someone could point out why the solution does not work for this test.</span></span><br><span class="line">    fo(st, <span class="number">0</span>, <span class="number">9</span>)</span><br><span class="line">        fo(i, <span class="number">0</span>, n+<span class="number">1</span>)</span><br><span class="line">            fo(j, <span class="number">0</span>, n+<span class="number">1</span>)</span><br><span class="line">                f[st][i][j] = (i == j ? <span class="number">0</span> : -INF);</span><br><span class="line">    fo(i, <span class="number">1</span>, n)</span><br><span class="line">        fo(j, <span class="number">1</span>,n)</span><br><span class="line">            c[<span class="number">0</span>][i][j] = (i == j ? <span class="number">0</span> : -INF);</span><br><span class="line">    fo(i, <span class="number">1</span>, m)&#123;</span><br><span class="line">        <span class="keyword">int</span> u, v;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; u &gt;&gt; v;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; f[<span class="number">0</span>][u][v] &gt;&gt; f[<span class="number">0</span>][v][u];</span><br><span class="line">    &#125;</span><br><span class="line">    fo(st, <span class="number">1</span>, <span class="number">9</span>)</span><br><span class="line">        fo(k, <span class="number">1</span>, n)</span><br><span class="line">            fo(i, <span class="number">1</span>, n)</span><br><span class="line">                fo(j, <span class="number">1</span>, n)</span><br><span class="line">                    f[st][i][j] = max(f[st][i][j], f[st<span class="number">-1</span>][i][k] + f[st<span class="number">-1</span>][k][j]);</span><br><span class="line">    <span class="keyword">bool</span> flag = <span class="literal">false</span>;</span><br><span class="line">    fo(i, <span class="number">1</span>, n)</span><br><span class="line">        <span class="keyword">if</span>(f[<span class="number">9</span>][i][i] &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            flag = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">if</span>(!flag)</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">puts</span>(<span class="string">&quot;0&quot;</span>), <span class="number">0</span>;</span><br><span class="line">    rfo(s, <span class="number">9</span>, <span class="number">0</span>)&#123;</span><br><span class="line">        flag = <span class="literal">false</span>;</span><br><span class="line">        fo(i, <span class="number">1</span>, n)</span><br><span class="line">            fo(j, <span class="number">1</span>, n)</span><br><span class="line">                c[<span class="number">1</span>][i][j] = c[<span class="number">0</span>][i][j];</span><br><span class="line">        fo(k, <span class="number">1</span>, n)</span><br><span class="line">            fo(i, <span class="number">1</span>, n)</span><br><span class="line">                fo(j, <span class="number">1</span>, n)</span><br><span class="line">                    c[<span class="number">1</span>][i][j] = max(c[<span class="number">1</span>][i][j], c[<span class="number">0</span>][i][k] + f[s][k][j]);</span><br><span class="line">        fo(i, <span class="number">1</span>, n)</span><br><span class="line">            <span class="keyword">if</span>(c[<span class="number">1</span>][i][i] &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                flag = <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        <span class="keyword">if</span>(!flag)&#123;</span><br><span class="line">            Ans += <span class="number">1</span> &lt;&lt; s;</span><br><span class="line">            fo(i, <span class="number">1</span>, n)</span><br><span class="line">                fo(j, <span class="number">1</span>, n)</span><br><span class="line">                    c[<span class="number">0</span>][i][j] = c[<span class="number">1</span>][i][j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, Ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Q2-max"><a href="#Q2-max" class="headerlink" title="Q2: max"></a>Q2: max</h2><p>Given a sequence of $n$ integers, find the maximum value of $m$ ranges.</p>
<h3 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h3><p>As the input value is too large, the input data will be inputed as follows:</p>
<ol>
<li>he first line includes $2$ integers, $n$ and $m$.</li>
<li>The second line includes three numbers, $gen$, $p_1$ and $p_2$.</li>
<li>Generate $n$ numbers, representing the sequence.</li>
<li>Generate $2m$ numbers, $2$ at a time, representing the ranges. If the first number is greater than the second number, swap them.</li>
</ol>
<p>Number should be generated using the funciton below:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> gen, p1, p2;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">number</span><span class="params">()</span></span>&#123;</span><br><span class="line">    gen = (<span class="number">1LL</span> * gen * p1 ) ^ p2;</span><br><span class="line">    <span class="keyword">return</span> (gen &amp; (n - <span class="number">1</span> )) + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h3><p>As the output value may be too large, let $ans_i$ be the answer for the $i$-th range, output one number only,<br>$$ \sum_{i=1}^{n} ans_i \times p_1 \mod p_2 $$</p>
<h3 id="Sample-IO"><a href="#Sample-IO" class="headerlink" title="Sample IO"></a>Sample IO</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Input <span class="number">1</span>:</span><br><span class="line"><span class="number">4</span> <span class="number">5</span></span><br><span class="line"><span class="number">32</span> <span class="number">17</span> <span class="number">19</span></span><br><span class="line">Output <span class="number">1</span>:</span><br><span class="line"><span class="number">17</span></span><br><span class="line"></span><br><span class="line">Input <span class="number">2</span>:</span><br><span class="line"><span class="number">8388608</span> <span class="number">8000000</span></span><br><span class="line"><span class="number">95</span> <span class="number">1071</span> <span class="number">1989</span></span><br><span class="line">Output <span class="number">2</span>:</span><br><span class="line"><span class="number">153</span></span><br></pre></td></tr></table></figure>
<p>(Note, sample Input 2 is the largest input)</p>
<h3 id="Solution-1"><a href="#Solution-1" class="headerlink" title="Solution"></a>Solution</h3><p>Obviously a <a href="/Data%20Structures/RMQ/">RMQ</a> problem, but the difficulty lies in that there is not enough space to implement the naive RMQ algorithm. We can sort the ranges in accending order of their length. Let $len_i$ be the length of range $i$, then for all $ \lfloor \log_2 len_i \rfloor = \lfloor \log_2 len_j \rfloor $, we generate the sparse table to $i$ and $j$ together.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fo(a, b, c) for (int a = b; a &lt;= c; a++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rfo(a, b, c) for (int a = b; a &gt;= c; a--)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">8388608</span> + <span class="number">10</span>;</span><br><span class="line">ll f[<span class="number">2</span>][N], a[N], n, m;</span><br><span class="line">ll ans;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">query</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> l, r, k;</span><br><span class="line">    <span class="keyword">friend</span> <span class="keyword">bool</span> <span class="keyword">operator</span> &lt; (query a, query b)&#123;<span class="keyword">return</span> a.k &lt; b.k;&#125;</span><br><span class="line">&#125;q[N];</span><br><span class="line"><span class="keyword">int</span> gen, p1, p2;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">number</span><span class="params">()</span></span>&#123;</span><br><span class="line">    gen = (<span class="number">1ll</span> * gen * p1) ^ p2;</span><br><span class="line">    <span class="keyword">return</span> (gen &amp; (n<span class="number">-1</span>)) + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> now = <span class="number">-1</span>, x;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">gene_rmq</span><span class="params">(<span class="keyword">int</span> k)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(now == <span class="number">-1</span>)&#123;</span><br><span class="line">        fo(i, <span class="number">1</span>, n)</span><br><span class="line">            f[<span class="number">0</span>][i] = a[i];</span><br><span class="line">        now++;</span><br><span class="line">        x = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(now &lt; k)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i + (<span class="number">1</span> &lt;&lt; (now + <span class="number">1</span>)) - <span class="number">1</span> &lt;= n; i++)</span><br><span class="line">            f[x^<span class="number">1</span>][i] = max(f[x][i], f[x][i+(<span class="number">1</span>&lt;&lt;now)]);</span><br><span class="line">        now++;</span><br><span class="line">        x ^= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">query</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> k)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> max(f[x][l], f[x][r - (<span class="number">1</span> &lt;&lt; k) + <span class="number">1</span>]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d%d%d&quot;</span>, &amp;n, &amp;m, &amp;gen, &amp;p1, &amp;p2);</span><br><span class="line">    fo(i, <span class="number">1</span>, n)</span><br><span class="line">        a[i] = number();</span><br><span class="line">    fo(i, <span class="number">1</span>, m)&#123;</span><br><span class="line">        q[i].l = number(), q[i].r = number();</span><br><span class="line">        <span class="keyword">if</span>(q[i].l &gt; q[i].r)</span><br><span class="line">            swap(q[i].l, q[i].r);</span><br><span class="line">        q[i].k = <span class="keyword">int</span>(<span class="built_in">log</span>(<span class="keyword">double</span>(q[i].r - q[i].l + <span class="number">1</span>)) / <span class="built_in">log</span>(<span class="number">2.0</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    sort(q+<span class="number">1</span>, q+m+<span class="number">1</span>);</span><br><span class="line">    fo(i, <span class="number">1</span>, m)&#123;</span><br><span class="line">        <span class="keyword">if</span>(q[i].k != now)</span><br><span class="line">            gene_rmq(q[i].k);</span><br><span class="line">        ans = (ans + query(q[i].l, q[i].r, q[i].k) * p1 % p2) % p2;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Q3-seq"><a href="#Q3-seq" class="headerlink" title="Q3: seq"></a>Q3: seq</h2><p>Given a sequence $A$, design a data structure capable of the following two operations:</p>
<ol>
<li>Alter the value of an element of $A$.</li>
<li>Let $p_i$ denote $\max_{j=1}^i a_j$, find $\sum_{i=1}^n p_i$.</li>
</ol>
<h3 id="Input-1"><a href="#Input-1" class="headerlink" title="Input"></a>Input</h3><p>In the first line, $n$, the length of $A$.</p>
<p>In the second line, $n$ integers, representing $A$ in order.</p>
<p>In the third line, $m$, the number of operations.</p>
<p>In each of the following $m$ lines, two integers, $pos$ and $val$, indicating to change $a_{pos}$ to $val$.</p>
<h3 id="Output-1"><a href="#Output-1" class="headerlink" title="Output"></a>Output</h3><p>For each operation, an integer, $\sum_{i=1}^n p_i$ after the operation.</p>
<h3 id="Sample-IO-1"><a href="#Sample-IO-1" class="headerlink" title="Sample IO"></a>Sample IO</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">Input:</span><br><span class="line"><span class="number">10</span></span><br><span class="line"><span class="number">114</span> <span class="number">357</span> <span class="number">904</span> <span class="number">407</span> <span class="number">100</span> <span class="number">624</span> <span class="number">449</span> <span class="number">897</span> <span class="number">115</span> <span class="number">846</span></span><br><span class="line"><span class="number">20</span></span><br><span class="line"><span class="number">5</span> <span class="number">357</span></span><br><span class="line"><span class="number">6</span> <span class="number">350</span></span><br><span class="line"><span class="number">2</span> <span class="number">939</span></span><br><span class="line"><span class="number">9</span> <span class="number">1182</span></span><br><span class="line"><span class="number">7</span> <span class="number">1062</span></span><br><span class="line"><span class="number">2</span> <span class="number">3300</span></span><br><span class="line"><span class="number">4</span> <span class="number">6867</span></span><br><span class="line"><span class="number">4</span> <span class="number">2076</span></span><br><span class="line"><span class="number">3</span> <span class="number">8458</span></span><br><span class="line"><span class="number">9</span> <span class="number">6575</span></span><br><span class="line"><span class="number">10</span> <span class="number">5737</span></span><br><span class="line"><span class="number">10</span> <span class="number">338</span></span><br><span class="line"><span class="number">9</span> <span class="number">10446</span></span><br><span class="line"><span class="number">4</span> <span class="number">7615</span></span><br><span class="line"><span class="number">2</span> <span class="number">5686</span></span><br><span class="line"><span class="number">4</span> <span class="number">10091</span></span><br><span class="line"><span class="number">1</span> <span class="number">6466</span></span><br><span class="line"><span class="number">6</span> <span class="number">15551</span></span><br><span class="line"><span class="number">3</span> <span class="number">10914</span></span><br><span class="line"><span class="number">7</span> <span class="number">3234</span></span><br><span class="line"></span><br><span class="line">Output:</span><br><span class="line"><span class="number">7703</span></span><br><span class="line"><span class="number">7703</span></span><br><span class="line"><span class="number">8565</span></span><br><span class="line"><span class="number">9051</span></span><br><span class="line"><span class="number">9297</span></span><br><span class="line"><span class="number">29814</span></span><br><span class="line"><span class="number">54783</span></span><br><span class="line"><span class="number">29814</span></span><br><span class="line"><span class="number">71078</span></span><br><span class="line"><span class="number">71078</span></span><br><span class="line"><span class="number">71078</span></span><br><span class="line"><span class="number">71078</span></span><br><span class="line"><span class="number">75054</span></span><br><span class="line"><span class="number">75054</span></span><br><span class="line"><span class="number">77440</span></span><br><span class="line"><span class="number">85605</span></span><br><span class="line"><span class="number">92737</span></span><br><span class="line"><span class="number">119327</span></span><br><span class="line"><span class="number">123429</span></span><br><span class="line"><span class="number">123429</span></span><br></pre></td></tr></table></figure>


<h3 id="Solution-2"><a href="#Solution-2" class="headerlink" title="Solution"></a>Solution</h3><p>Using segment tree, we can maintain the max of each range. Assume we know the answer of a range&#39;s left son and right son (the answer of a range here is not concerned with any value to the left of it, that is, for range $l$ to $r$ and $l \le i \le r$, $p_i$ has nothing to do with $p_{l-1}$, even if that means $p_i &lt; p_{l-1}$), then we consider merging the left son and right son to find the answer for the range.</p>
<p>Clearly, the answer for the left son is not affected by the right son, and only the max of the left son affects the right son. If the max of the left son is higher than the max of the right son, then the contribution of the right son is its length multiplied by the max of the left son. If the max of the left son is lower than the max of the right son&#39;s left son, then we can recurse into the right son&#39;s left son. Otherwise, we can recurse into the right son&#39;s right son. Hence we have,</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">ll <span class="title">pushdown</span><span class="params">(<span class="keyword">int</span> x, ll val)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(val &gt; t[x].Max)</span><br><span class="line">        <span class="keyword">return</span> t[x].len * val;</span><br><span class="line">    <span class="keyword">if</span>(t[x].l == t[x].r)</span><br><span class="line">        <span class="keyword">return</span> max(t[x].Max, val);</span><br><span class="line">    <span class="keyword">if</span>(t[lc].Max &gt; val)</span><br><span class="line">        <span class="keyword">return</span> pushdown(lc, val) + t[x].ans - t[lc].ans;</span><br><span class="line">    <span class="keyword">return</span> t[lc].len * val + pushdown(rc, val);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">collect</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line">    t[x].Max = max(t[lc].Max, t[rc].Max);</span><br><span class="line">    t[x].ans = t[lc].ans + pushdown(rc, t[lc].Max);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Now everything becomes clear, for each operation, we can recurse down to change the max of a range of length $1$, and recurse back up while updating max values and collecting answers. We can notice that the answer for node $1$ is the answer we are looking for.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fo(a, b, c) for (int a = b; a &lt;= c; a++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rfo(a, b, c) for (int a = b; a &gt;= c; a--)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">3e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line">ll n, m, a[N];</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SegmentTree</span>&#123;</span></span><br><span class="line">  <span class="keyword">private</span>:</span><br><span class="line">    <span class="meta">#<span class="meta-keyword">define</span> lc (x &lt;&lt; 1)</span></span><br><span class="line">    <span class="meta">#<span class="meta-keyword">define</span> rc (x &lt;&lt; 1 | 1)</span></span><br><span class="line">    <span class="meta">#<span class="meta-keyword">define</span> mid ((t[x].l + t[x].r) &gt;&gt; 1)</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></span><br><span class="line">        <span class="keyword">int</span> l, r, len;</span><br><span class="line">        ll Max, ans;</span><br><span class="line">    &#125; t[N &lt;&lt; <span class="number">2</span>];</span><br><span class="line"></span><br><span class="line">    <span class="function">ll <span class="title">pushdown</span><span class="params">(<span class="keyword">int</span> x, ll val)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(val &gt; t[x].Max)</span><br><span class="line">            <span class="keyword">return</span> t[x].len * val;</span><br><span class="line">        <span class="keyword">if</span>(t[x].l == t[x].r)</span><br><span class="line">            <span class="keyword">return</span> max(t[x].Max, val);</span><br><span class="line">        <span class="keyword">if</span>(t[lc].Max &gt; val)</span><br><span class="line">            <span class="keyword">return</span> pushdown(lc, val) + t[x].ans - t[lc].ans;</span><br><span class="line">        <span class="keyword">return</span> t[lc].len * val + pushdown(rc, val);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">collect</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line">        t[x].Max = max(t[lc].Max, t[rc].Max);</span><br><span class="line">        t[x].ans = t[lc].ans + pushdown(rc, t[lc].Max);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span></span>&#123;</span><br><span class="line">        t[x].l = l;</span><br><span class="line">        t[x].r = r;</span><br><span class="line">        t[x].len = r - l + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(l == r)&#123;</span><br><span class="line">            t[x].Max = t[x].ans = a[l];</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        build(lc, l, mid);</span><br><span class="line">        build(rc, mid + <span class="number">1</span>, r);</span><br><span class="line">        collect(x);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> pos, <span class="keyword">int</span> val)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(t[x].l == t[x].r)&#123;</span><br><span class="line">            t[x].Max = t[x].ans = val;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(pos &lt;= mid)</span><br><span class="line">            update(lc, pos, val);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            update(rc, pos, val);</span><br><span class="line">        collect(x);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">ll <span class="title">query</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> t[<span class="number">1</span>].ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;segtree;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%lld&quot;</span>, &amp;n);</span><br><span class="line">    fo(i, <span class="number">1</span>, n)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%lld&quot;</span>, &amp;a[i]);</span><br><span class="line">    segtree.build(<span class="number">1</span>, <span class="number">1</span>, n);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%lld&quot;</span>, &amp;m);</span><br><span class="line">    fo(i, <span class="number">1</span>, m)&#123;</span><br><span class="line">        <span class="keyword">int</span> pos, val;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;pos, &amp;val);</span><br><span class="line">        segtree.update(<span class="number">1</span>, pos, val);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, segtree.query());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/cxhscst2/p/8419870.html">https://www.cnblogs.com/cxhscst2/p/8419870.html</a></p>

    </div>

    
    
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>Post author:  </strong>thyroidr
  </li>
  <li class="post-copyright-link">
    <strong>Post link: </strong>
    <a href="https://thyroidr.github.io/InfoBlogs/DTOJ/DTOJ/virtual-contest-2018-10-19/" title="Virtual Contest 2018&#x2F;10&#x2F;19">https://thyroidr.github.io/InfoBlogs/DTOJ/DTOJ/virtual-contest-2018-10-19/</a>
  </li>
  <li class="post-copyright-license">
    <strong>Copyright Notice:  </strong>All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> unless stating additionally.
  </li>
</ul>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/InfoBlogs/tags/c/" rel="tag"># c++</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/InfoBlogs/CodeForces/CodeForces/codeforces-517/" rel="prev" title="CodeForces Round #517">
      <i class="fa fa-chevron-left"></i> CodeForces Round #517
    </a></div>
      <div class="post-nav-item">
    <a href="/InfoBlogs/Basic-Python/Basic-Python/python-string-sequences/" rel="next" title="Python String Sequences">
      Python String Sequences <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Q1-amp-CodeForces-147B-Smile-House"><span class="nav-number">1.</span> <span class="nav-text">Q1 &amp; CodeForces 147B: Smile House</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Solution"><span class="nav-number">1.1.</span> <span class="nav-text">Solution</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Q2-max"><span class="nav-number">2.</span> <span class="nav-text">Q2: max</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Input"><span class="nav-number">2.1.</span> <span class="nav-text">Input</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Output"><span class="nav-number">2.2.</span> <span class="nav-text">Output</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Sample-IO"><span class="nav-number">2.3.</span> <span class="nav-text">Sample IO</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Solution-1"><span class="nav-number">2.4.</span> <span class="nav-text">Solution</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Q3-seq"><span class="nav-number">3.</span> <span class="nav-text">Q3: seq</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Input-1"><span class="nav-number">3.1.</span> <span class="nav-text">Input</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Output-1"><span class="nav-number">3.2.</span> <span class="nav-text">Output</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Sample-IO-1"><span class="nav-number">3.3.</span> <span class="nav-text">Sample IO</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Solution-2"><span class="nav-number">3.4.</span> <span class="nav-text">Solution</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Reference"><span class="nav-number">4.</span> <span class="nav-text">Reference</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Ryan Wang"
      src="/InfoBlogs/images/avatar.png">
  <p class="site-author-name" itemprop="name">Ryan Wang</p>
  <div class="site-description" itemprop="description">Museum of my involvement in Informatics Olympiads & competitive programming</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/InfoBlogs/archives/">
        
          <span class="site-state-item-count">74</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/InfoBlogs/categories/">
          
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/InfoBlogs/tags/">
          
        <span class="site-state-item-count">53</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/thyroidr" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;thyroidr" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:ryanxiaowang2001@gmail.com" title="E-Mail → mailto:ryanxiaowang2001@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.linkedin.com/in/rxw/" title="LinkedIn → https:&#x2F;&#x2F;www.linkedin.com&#x2F;in&#x2F;rxw&#x2F;" rel="noopener" target="_blank"><i class="fab fa-linkedin fa-fw"></i>LinkedIn</a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/InfoBlogs/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2018 – 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Ryan Wang</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://mist.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/InfoBlogs/lib/anime.min.js"></script>
  <script src="/InfoBlogs/lib/velocity/velocity.min.js"></script>
  <script src="/InfoBlogs/lib/velocity/velocity.ui.min.js"></script>

<script src="/InfoBlogs/js/utils.js"></script>

<script src="/InfoBlogs/js/motion.js"></script>


<script src="/InfoBlogs/js/schemes/muse.js"></script>


<script src="/InfoBlogs/js/next-boot.js"></script>




  















  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

</body>
</html>
